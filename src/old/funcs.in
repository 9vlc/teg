#!/bin/sh
# vim: noet

#
# print with no formatting
#
P()
{
	printf '%s' "$*"
}

#
# turn input to lowercase
#
_lcase()
{
	if [ "$*" = - ]; then
		dd conv=lcase 2>/dev/null
	else
		P "$*" | dd conv=lcase 2>/dev/null
	fi
}

#
# turn input to uppercase
#
_ucase()
{
	if [ "$*" = - ]; then
		dd conv=ucase 2>/dev/null
	else
		P "$*" | dd conv=ucase 2>/dev/null
	fi
}

#
# logging and errors
#
L()
{
	case "$1" in
	d)
		shift 1
		1>&2 printf 'debug: %s\n' "$*"
	;;
	w) # warning
		shift 1
		if [ "$current_line" ]; then
			1>&2 printf 'warn on line %s: %s\n' "$current_line" "$@"
		else
			1>&2 printf 'warn: %s\n' "$@"
		fi
	;;
	e) # error, exit after the message
		shift 1
		if [ "$current_line" ]; then
			1>&2 printf 'err on line %s: %s\n' "$current_line" "$@"
		else
			1>&2 printf 'err: %s\n' "$@"
		fi
		exit 1
	;;
	esac
}

#
# tegcode processor
#
tegproc()
{
	
}
